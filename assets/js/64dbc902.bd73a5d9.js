"use strict";(self.webpackChunk_inversifyjs_framework_docs_site=self.webpackChunk_inversifyjs_framework_docs_site||[]).push([["5806"],{9175:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>d,toc:()=>p,default:()=>f,metadata:()=>a,assets:()=>u,contentTitle:()=>c});var a=JSON.parse('{"id":"introduction/getting-started","title":"Getting started","description":"Inversify Validation is a powerful set of tools to create validation flows on top of InversifyJS. It provides decorators and utilities to define validation schemas, apply them to your classes, and handle validation errors gracefully.","source":"@site/validation-docs/introduction/getting-started.mdx","sourceDirName":"introduction","slug":"/introduction/getting-started","permalink":"/framework/validation/introduction/getting-started","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Getting started"},"sidebar":"validationSidebar","next":{"title":"Introduction","permalink":"/framework/validation/standard-schema/introduction"}}'),r=n(6820),i=n(7588),s=n(5340),o=n(9366),l=n(8979);let d={sidebar_position:1,title:"Getting started"},c="Getting started",u={},p=[{value:"Install dependencies",id:"install-dependencies",level:2},{value:"Install integration package",id:"install-integration-package",level:2},{value:"Configure server",id:"configure-server",level:2},{value:"Configure controller",id:"configure-controller",level:2}];function h(e){let t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"getting-started",children:"Getting started"})}),"\n",(0,r.jsx)(t.p,{children:"Inversify Validation is a powerful set of tools to create validation flows on top of InversifyJS. It provides decorators and utilities to define validation schemas, apply them to your classes, and handle validation errors gracefully."}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsx)(t.p,{children:"This docs focusess on validation in the context of HTTP applications, but the validation tools can be used in any context a Pipe can be used."})}),"\n",(0,r.jsx)(t.h2,{id:"install-dependencies",children:"Install dependencies"}),"\n",(0,r.jsx)(t.p,{children:"Given a HTTP adapter of your choice already set up, using validation tools is straightforward:"}),"\n",(0,r.jsx)(t.p,{children:"Begin by installing the validation package of your choice along with its peer dependencies:"}),"\n",(0,r.jsxs)(o.A,{children:[(0,r.jsx)(l.A,{value:"Zod (Standard schema)",label:"Zod (Standard schema)",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"  npm install zod @inversifyjs/standard-schema-validation\n"})})}),(0,r.jsx)(l.A,{value:"Ajv",label:"Ajv",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"  npm install ajv @inversifyjs/ajv-validation\n"})})}),(0,r.jsx)(l.A,{value:"class-validator",label:"class-validator",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"  npm install class-validator class-transformer @inversifyjs/class-validation\n"})})})]}),"\n",(0,r.jsx)(t.admonition,{type:"warning",children:(0,r.jsxs)(t.p,{children:["Make sure to enable the ",(0,r.jsx)(t.a,{href:"https://www.typescriptlang.org/tsconfig/#experimentalDecorators",children:"Experimental Decorators"})," and ",(0,r.jsx)(t.a,{href:"https://www.typescriptlang.org/tsconfig/#emitDecoratorMetadata",children:"Emit Decorator Metadata"})," options in your ",(0,r.jsx)(t.code,{children:"tsconfig.json"}),"."]})}),"\n",(0,r.jsx)(t.h2,{id:"install-integration-package",children:"Install integration package"}),"\n",(0,r.jsx)(t.p,{children:"Validation tools are designed to work outside HTTP context. In order to use them in an HTTP application, you need to install the appropriate package."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"  npm install @inversifyjs/http-validation\n"})}),"\n",(0,r.jsx)(t.h2,{id:"configure-server",children:"Configure server"}),"\n",(0,r.jsx)(t.p,{children:"In order to enable validation in your application, you need to configure the server:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Use the specific validator error pipe. If we take the previous example, we need to use a ",(0,r.jsx)(t.code,{children:"StandardSchemaValidationPipe"}),", for Zod is integrated via Standard Schema integration."]}),"\n",(0,r.jsxs)(t.li,{children:["Use the ",(0,r.jsx)(t.code,{children:"ValidationErrorFilter"})," to handle validation errors. This error filter provided by the ",(0,r.jsx)(t.code,{children:"@inversifyjs/http-validation"})," package catches validation errors in order to send Bad Request HTTP responses on top of them."]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"  const adapter: InversifyExpressHttpAdapter = new InversifyExpressHttpAdapter(\n    container,\n    {\n      logger: true,\n      useCookies: true,\n    },\n  );\n\n  adapter.useGlobalFilters(ValidationErrorFilter);\n  adapter.useGlobalPipe(new StandardSchemaValidationPipe());\n"})}),"\n",(0,r.jsx)(t.h2,{id:"configure-controller",children:"Configure controller"}),"\n",(0,r.jsx)(t.p,{children:"After configuring the server, just apply the validation decorators to your controller routes. Below is a basic example of setting up a controller to validate a request body."}),"\n",(0,r.jsx)(s.A,{language:"typescript",children:"import { Body, Controller, Post } from '@inversifyjs/http-core';\nimport { ValidateStandardSchemaV1 } from '@inversifyjs/standard-schema-validation';\nimport zod from 'zod';\n\ninterface Message {\n  content: string;\n}\n\n@Controller('/messages')\nexport class MessageController {\n  @Post()\n  public async createMessage(\n    @Body()\n    @ValidateStandardSchemaV1(\n      zod.object({ content: zod.string().max(100) }).strict(),\n    )\n    message: Message,\n  ): Promise<Message> {\n    return message;\n  }\n}\n"})]})}function f(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8979:function(e,t,n){n.d(t,{A:()=>i});var a=n(6820);n(5080);var r=n(929);function i({children:e,hidden:t,className:n}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)("tabItem_ZQYt",n),hidden:t,children:e})}},9366:function(e,t,n){n.d(t,{A:()=>x});var a=n(6820),r=n(5080),i=n(929),s=n(8872),o=n(8804),l=n(3357),d=n(6085),c=n(5176),u=n(4601),p=n(7937);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){let{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function f({value:e,tabValues:t}){return t.some(t=>t.value===e)}var v=n(1511);function g({className:e,block:t,selectedValue:n,selectValue:r,tabValues:s}){let l=[],{blockElementScrollPositionUntilNextRender:d}=(0,o.a_)(),c=e=>{let t=e.currentTarget,a=s[l.indexOf(t)].value;a!==n&&(d(t),r(a))},u=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{let n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{let n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1]}}t?.focus()};return(0,a.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},e),children:s.map(({value:e,label:t,attributes:r})=>(0,a.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{l.push(e)},onKeyDown:u,onClick:c,...r,className:(0,i.A)("tabs__item","tabItem_nwT9",r?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function m({lazy:e,children:t,selectedValue:n}){let s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){let e=s.find(e=>e.props.value===n);return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,a.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function j(e){let t=function(e){let t,{defaultValue:n,queryString:a=!1,groupId:i}=e,s=function(e){let{values:t,children:n}=e;return(0,r.useMemo)(()=>{let e=t??h(n).map(({props:{value:e,label:t,attributes:n,default:a}})=>({value:e,label:t,attributes:n,default:a})),a=(0,u.XI)(e,(e,t)=>e.value===t.value);if(a.length>0)throw Error(`Docusaurus error: Duplicate values "${a.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[t,n])}(e),[o,v]=(0,r.useState)(()=>(function({defaultValue:e,tabValues:t}){if(0===t.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!f({value:e,tabValues:t}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let n=t.find(e=>e.default)??t[0];if(!n)throw Error("Unexpected error: 0 tabValues");return n.value})({defaultValue:n,tabValues:s})),[g,m]=function({queryString:e=!1,groupId:t}){let n=(0,l.W6)(),a=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(a),(0,r.useCallback)(e=>{if(!a)return;let t=new URLSearchParams(n.location.search);t.set(a,e),n.replace({...n.location,search:t.toString()})},[a,n])]}({queryString:a,groupId:i}),[j,x]=function({groupId:e}){let t=e?`docusaurus.tab.${e}`:null,[n,a]=(0,p.Dv)(t);return[n,(0,r.useCallback)(e=>{t&&a.set(e)},[t,a])]}({groupId:i}),b=f({value:t=g??j,tabValues:s})?t:null;return(0,d.A)(()=>{b&&v(b)},[b]),{selectedValue:o,selectValue:(0,r.useCallback)(e=>{if(!f({value:e,tabValues:s}))throw Error(`Can't select invalid tab value=${e}`);v(e),m(e),x(e)},[m,x,s]),tabValues:s}}(e);return(0,a.jsxs)("div",{className:(0,i.A)(s.G.tabs.container,"tabs-container","tabList_VS2w"),children:[(0,a.jsx)(g,{...t,...e}),(0,a.jsx)(m,{...t,...e})]})}function x(e){let t=(0,v.A)();return(0,a.jsx)(j,{...e,children:h(e.children)},String(t))}}}]);